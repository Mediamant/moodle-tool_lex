define(["jquery","tool_lex/aws-sdk"],function(a){var b={};return b.init=function(b,c,d){function e(a){a.preventDefault();var b=document.getElementById("wisdom");if(b&&b.value&&b.value.trim().length>0){var c=b.value.trim();b.value="...",b.locked=!0;var d={botAlias:"$LATEST",botName:i,inputText:c,userId:k,sessionAttributes:l};f(c),j.postText(d,function(a,c){a&&(console.log(a,a.stack),g("Error:  "+a.message+" (see console for details)")),c&&(l=c.sessionAttributes,h(c)),b.value="",b.locked=!1})}return!1}function f(a){var b=document.getElementById("conversation"),c=document.createElement("P");c.className="userRequest",c.appendChild(document.createTextNode(a)),b.appendChild(c),b.scrollTop=b.scrollHeight}function g(a){var b=document.getElementById("conversation"),c=document.createElement("P");c.className="lexError",c.appendChild(document.createTextNode(a)),b.appendChild(c),b.scrollTop=b.scrollHeight}function h(a){var b=document.getElementById("conversation"),c=document.createElement("P");c.className="lexResponse",a.message&&(c.appendChild(document.createTextNode(a.message)),c.appendChild(document.createElement("br"))),"ReadyForFulfillment"===a.dialogState?c.appendChild(document.createTextNode("Ready for fulfillment")):c.appendChild(document.createTextNode("("+a.dialogState+")")),b.appendChild(c),b.scrollTop=b.scrollHeight}AWS.config.region=d,AWS.config.credentials=new AWS.CognitoIdentityCredentials({IdentityPoolId:c});var i=b,j=new AWS.LexRuntime,k="chatbot-demo"+Date.now(),l={};a("#chatform").submit(e)},b});